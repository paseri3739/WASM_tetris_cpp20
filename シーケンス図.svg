<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="768px" preserveAspectRatio="none" style="width:1038px;height:768px;background:#FFFFFF;" version="1.1" viewBox="0 0 1038 768" width="1038px" zoomAndPan="magnify"><title>1フレームの流れ（シーケンス図）</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="219.7403" x="405.3165" y="27.9951">1フレームの流れ（シーケンス図）</text><g><title>SDL.OS</title><rect fill="#000000" fill-opacity="0.00000" height="569.3906" width="8" x="30.0449" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="34" x2="34" y1="118.5938" y2="687.9844"/></g><g><title>Game</title><rect fill="#000000" fill-opacity="0.00000" height="569.3906" width="8" x="210.9527" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="214.1133" x2="214.1133" y1="118.5938" y2="687.9844"/></g><g><title>SceneBox</title><rect fill="#000000" fill-opacity="0.00000" height="569.3906" width="8" x="426.7726" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="430.2033" x2="430.2033" y1="118.5938" y2="687.9844"/></g><g><title>Runner.ECS.</title><rect fill="#000000" fill-opacity="0.00000" height="569.3906" width="8" x="654.0158" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="657.4421" x2="657.4421" y1="118.5938" y2="687.9844"/></g><g><title>World.registry.</title><rect fill="#000000" fill-opacity="0.00000" height="569.3906" width="8" x="866.6175" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="869.7005" x2="869.7005" y1="118.5938" y2="687.9844"/></g><g><title>Renderer.</title><rect fill="#000000" fill-opacity="0.00000" height="569.3906" width="8" x="979.4539" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="982.5345" x2="982.5345" y1="118.5938" y2="687.9844"/></g><g class="participant participant-head" data-participant="OS"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0898" x="5" y="115.292">SDL/OS</text><ellipse cx="34.0449" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M34.0449,58.7969 L34.0449,85.7969 M21.0449,66.7969 L47.0449,66.7969 M34.0449,85.7969 L21.0449,100.7969 M34.0449,85.7969 L47.0449,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="OS"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52.0898" x="5" y="699.9795">SDL/OS</text><ellipse cx="34.0449" cy="711.7813" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M34.0449,719.7813 L34.0449,746.7813 M21.0449,727.7813 L47.0449,727.7813 M34.0449,746.7813 L21.0449,761.7813 M34.0449,746.7813 L47.0449,761.7813" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Game"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55.6787" x="187.1133" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.6787" x="194.1133" y="107.292">Game</text></g><g class="participant participant-tail" data-participant="Game"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55.6787" x="187.1133" y="686.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.6787" x="194.1133" y="706.9795">Game</text></g><g class="participant participant-head" data-participant="Box"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.1387" x="389.2033" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.1387" x="396.2033" y="107.292">SceneBox</text></g><g class="participant participant-tail" data-participant="Box"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.1387" x="389.2033" y="686.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.1387" x="396.2033" y="706.9795">SceneBox</text></g><g class="participant participant-head" data-participant="Runner"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.1475" x="606.4421" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.1475" x="613.4421" y="107.292">Runner(ECS)</text></g><g class="participant participant-tail" data-participant="Runner"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.1475" x="606.4421" y="686.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.1475" x="613.4421" y="706.9795">Runner(ECS)</text></g><g class="participant participant-head" data-participant="World"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.834" x="810.7005" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.834" x="817.7005" y="107.292">World(registry)</text></g><g class="participant participant-tail" data-participant="World"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119.834" x="810.7005" y="686.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.834" x="817.7005" y="706.9795">World(registry)</text></g><g class="participant participant-head" data-participant="R"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85.8389" x="940.5345" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.8389" x="947.5345" y="107.292">Renderer*</text></g><g class="participant participant-tail" data-participant="R"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85.8389" x="940.5345" y="686.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.8389" x="947.5345" y="706.9795">Renderer*</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1031.3733" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1031.3733" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1031.3733" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="44.5259" x="493.4237" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="499.4237" y="154.6606">入力</text><g class="message" data-participant-1="OS" data-participant-2="Game"><polygon fill="#181818" points="202.9527,188.8594,212.9527,192.8594,202.9527,196.8594,206.9527,192.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="34.0449" x2="208.9527" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.9078" x="41.0449" y="187.7935">SDL_PollEvent / 時刻取得</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1031.3733" x="0" y="221.4258"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1031.3733" y1="221.4258" y2="221.4258"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1031.3733" y1="224.4258" y2="224.4258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="44.5259" x="493.4237" y="210.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="499.4237" y="226.9263">更新</text><g class="message" data-participant-1="Game" data-participant-2="Game"><line style="stroke:#181818;stroke-width:1;" x1="214.9527" x2="256.9527" y1="265.125" y2="265.125"/><line style="stroke:#181818;stroke-width:1;" x1="256.9527" x2="256.9527" y1="265.125" y2="278.125"/><line style="stroke:#181818;stroke-width:1;" x1="215.9527" x2="256.9527" y1="278.125" y2="278.125"/><polygon fill="#181818" points="225.9527,274.125,215.9527,278.125,225.9527,282.125,221.9527,278.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.4717" x="221.9527" y="260.0591">Env{ input, setting, dt } 構築</text></g><g class="message" data-participant-1="Game" data-participant-2="Box"><polygon fill="#181818" points="418.7726,303.2578,428.7726,307.2578,418.7726,311.2578,422.7726,307.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="214.9527" x2="424.7726" y1="307.2578" y2="307.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.1943" x="221.9527" y="302.1919">step(env)</text></g><g class="message" data-participant-1="Box" data-participant-2="Box"><line style="stroke:#181818;stroke-width:1;" x1="430.7726" x2="472.7726" y1="366.6563" y2="366.6563"/><line style="stroke:#181818;stroke-width:1;" x1="472.7726" x2="472.7726" y1="366.6563" y2="379.6563"/><line style="stroke:#181818;stroke-width:1;" x1="431.7726" x2="472.7726" y1="379.6563" y2="379.6563"/><polygon fill="#181818" points="441.7726,375.6563,431.7726,379.6563,441.7726,383.6563,437.7726,379.6563" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.2432" x="437.7726" y="331.3247">ADLで update(currentState, env)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.8525" x="437.7726" y="346.4575">→ NextVariant&lt;State&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.0001" x="437.7726" y="361.5903">（純粋）</text></g><g class="message" data-participant-1="Box" data-participant-2="Box"><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="430.7726" x2="472.7726" y1="408.7891" y2="408.7891"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="472.7726" x2="472.7726" y1="408.7891" y2="421.7891"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="431.7726" x2="472.7726" y1="421.7891" y2="421.7891"/><polygon fill="#181818" points="441.7726,417.7891,431.7726,421.7891,441.7726,425.7891,437.7726,421.7891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.9318" x="437.7726" y="403.7231">型が変われば内部state差替え</text></g><g class="message" data-participant-1="Game" data-participant-2="Runner"><polygon fill="#181818" points="646.0158,446.9219,656.0158,450.9219,646.0158,454.9219,650.0158,450.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="214.9527" x2="652.0158" y1="450.9219" y2="450.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278.2686" x="221.9527" y="445.856">run_schedule(World, Resources, Schedule)</text></g><g class="message" data-participant-1="Runner" data-participant-2="World"><polygon fill="#181818" points="858.6175,491.1875,868.6175,495.1875,858.6175,499.1875,862.6175,495.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="658.0158" x2="864.6175" y1="495.1875" y2="495.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.6017" x="665.0158" y="474.9888">CommandBuffer 適用（一括）</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.0001" x="665.0158" y="490.1216">（ここだけ副作用）</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1031.3733" x="0" y="523.7539"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1031.3733" y1="523.7539" y2="523.7539"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1031.3733" y1="526.7539" y2="526.7539"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="44.5259" x="493.4237" y="513.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="499.4237" y="529.2544">描画</text><g class="message" data-participant-1="Game" data-participant-2="Box"><polygon fill="#181818" points="418.7726,563.4531,428.7726,567.4531,418.7726,571.4531,422.7726,567.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="214.9527" x2="424.7726" y1="567.4531" y2="567.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.3867" x="221.9527" y="562.3872">renderIO()</text></g><g class="message" data-participant-1="Box" data-participant-2="Game"><polygon fill="#181818" points="225.9527,592.5859,215.9527,596.5859,225.9527,600.5859,221.9527,596.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="219.9527" x2="429.7726" y1="596.5859" y2="596.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.8199" x="231.9527" y="591.52">IO&lt;Unit&gt;（SDL副作用ラムダ）</text></g><g class="message" data-participant-1="Game" data-participant-2="R"><polygon fill="#181818" points="971.4539,636.8516,981.4539,640.8516,971.4539,644.8516,975.4539,640.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="214.9527" x2="977.4539" y1="640.8516" y2="640.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30.7417" x="221.9527" y="620.6528">io(R)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.6373" x="221.9527" y="635.7856">（SDL_* をここで実行）</text></g><g class="message" data-participant-1="Game" data-participant-2="OS"><polygon fill="#181818" points="45.0449,665.9844,35.0449,669.9844,45.0449,673.9844,41.0449,669.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="39.0449" x2="213.9527" y1="669.9844" y2="669.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.0001" x="51.0449" y="664.9185">フレーム終了</text></g><!--SRC=[NLFlQzD06FwUl-Abdz9H6NuTQy5jHGR3IeFwPJ12Sfk1zb8kbp8HOKbOQMsXEEj4Alu0fHkCRhgDgQlwltYzn7tQl-3bKcCh18vxt-TvUDxtkL2BLX3SPC4B5XonOCI2TymRXkSUyplNeoRpB-AY_ua5fyp_olkdrwEMekW6jGbaj9Mr-PAM0Ts1agRKT48jmwhfcC9jlOfc2XdDG1WjsTiIBSxPRjd5616rkAnb9I2vps8UsAHYgWHjMGubZnAShFqdXR29229pYP2YvFF0Tp_oftt8vvMI1ZSAqXuiWF2_STUkL8fr99Zp4BxoUVEIT_VvZvUI5_RFmlsJc2SP_vX5N7yC5gwvD0SEejJ2MpamAJo1SD2EZbifNamgu0v5DHNXUbQ9xsdvrieQymRWraoT8jLm2H4-D2ekEOZHw_XNOm_ke6rwNoUMc6vHDWlhM4GJdVMYp-qu3gcPYl8tRUPr-8SMyxiYHEQTyCRkLN3Wn5H-CGpxFvdNJ0qccnOyuk8DntY8JBU2LBdN79IHOxl4G4uEj4ahgqmOWYjHWhfiLwiwDfVSpKtHkF8Eezw1S3Z-iXEsZuH3wPTvp-KdtjSptZeUVtyjKQraqTrkrBkSNdGo395XhfRKR3hb987Lqk8zRD62K1Onfe8iE8oVSB0JAwSp2hnbg-MiD1AdFWVCt_lhQC27Rt-_xqmpn3DPWEcV8ZhtnzyQVm00]--></g></svg>